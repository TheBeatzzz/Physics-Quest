<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kinetic Quest: Mobile Lab</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        .animate-shake { animation: shake 0.2s ease-in-out infinite; }
    </style>
</head>
<body class="bg-slate-950 text-cyan-400 font-mono">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        function KineticQuest() {
            const [universe, setUniverse] = useState({ name: "Standard-Brane", h: 6.62, c: 299, uncertainty: 0.1 });
            const [player, setPlayer] = useState({ name: "Photiny", hp: 100, maxHp: 100, freq: 15 });
            const [enemy, setEnemy] = useState({ name: "Electron", hp: 50, maxHp: 50, freq: 10 });
            const [log, setLog] = useState("Mobile Lab Online. Tap to observe.");
            const [isShaking, setIsShaking] = useState(false);

            // Audio Synth Helper
            const playTone = (freq, duration) => {
                const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + duration);
                osc.connect(gain); gain.connect(audioCtx.destination);
                osc.start(); osc.stop(audioCtx.currentTime + duration);
            };

            const attack = (power) => {
                if (Math.random() < universe.uncertainty) {
                    setLog("Uncertainty Spike! Move missed.");
                    return;
                }
                const dmg = Math.floor((universe.h * player.freq) / 10 + power);
                setIsShaking(true);
                playTone(440, 0.1);
                setEnemy(e => ({ ...e, hp: Math.max(0, e.hp - dmg) }));
                setLog(`Photiny hit for ${dmg} energy!`);
                setTimeout(() => setIsShaking(false), 500);
            };

            const jump = () => {
                const newH = (Math.random() * 20).toFixed(2);
                setUniverse({ name: "Warped-Dimension", h: newH, c: 150, uncertainty: newH / 50 });
                setLog(`Jump successful! New h: ${newH}`);
            };

            return (
                <div className="flex flex-col items-center p-4 min-h-screen">
                    <div className="border border-cyan-800 p-2 w-full mb-4 text-[10px] flex justify-between">
                        <span>DIMENSION: {universe.name}</span>
                        <span>H-CONST: {universe.h}</span>
                    </div>

                    <div className={`w-full bg-slate-900 border-2 border-cyan-900 rounded-xl p-6 mb-4 ${isShaking ? 'animate-shake' : ''}`}>
                        <div className="flex justify-between mb-10">
                            <div>
                                <p className="text-xs text-red-500">{enemy.name}</p>
                                <div className="w-24 h-2 bg-gray-800 rounded-full"><div className="bg-red-500 h-full" style={{width: `${(enemy.hp/enemy.maxHp)*100}%`}}></div></div>
                            </div>
                            <div className="text-right">
                                <p className="text-xs text-cyan-500">{player.name}</p>
                                <div className="w-24 h-2 bg-gray-800 rounded-full"><div className="bg-cyan-500 h-full" style={{width: `${(player.hp/player.maxHp)*100}%`}}></div></div>
                            </div>
                        </div>
                        <div className="bg-black p-2 h-16 text-xs italic border border-slate-800 mb-4">{log}</div>
                        <div className="grid grid-cols-2 gap-2">
                            <button onClick={() => attack(10)} className="bg-cyan-900 p-3 text-[10px] font-bold">PULSE</button>
                            <button onClick={jump} className="bg-purple-900 p-3 text-[10px] font-bold">JUMP</button>
                        </div>
                    </div>
                    <p className="text-[8px] opacity-50 uppercase">Kinetic Quest Mobile v1 // Built on iPhone</p>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<KineticQuest />);
    </script>
</body>
</html>
